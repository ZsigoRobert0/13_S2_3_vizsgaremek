using StockMaster.Api.Data;
using StockMaster.Api.Models;

public static class DbSeeder
{
    public static void Seed(ApplicationDbContext db)
    {
        if (!db.Assets.Any())
        {
            db.Assets.AddRange(new[]
            {
                new Asset { Symbol="AAPL", Name="Apple Inc.", LastPrice=170.12m, LastUpdated=DateTime.UtcNow },
                new Asset { Symbol="MSFT", Name="Microsoft Corp.", LastPrice=330.50m, LastUpdated=DateTime.UtcNow },
                new Asset { Symbol="GOOG", Name="Alphabet Inc.", LastPrice=150.34m, LastUpdated=DateTime.UtcNow },
                new Asset { Symbol="TSLA", Name="Tesla Inc.", LastPrice=260.11m, LastUpdated=DateTime.UtcNow }
            });
            db.SaveChanges();
        }

        if (!db.Users.Any())
        {
            var user = new User { Email = "demo@stockmaster.local", PasswordHash = new StockMaster.Api.Services.UserService(db, new ConfigurationBuilder().AddInMemoryCollection(new Dictionary<string,string>{{"Jwt:Key","temp"} }).Build()).HashPassword("demo123"), Balance = 10000m};
            db.Users.Add(user);
            db.SaveChanges();
        }
    }
}
